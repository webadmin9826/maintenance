<!doctype html><html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Admin</title></head><body><h1>Admin</h1><button id='r'>Refresh</button><table id='t' border='1' cellpadding='6'><thead><tr><th>ID</th><th>Requester</th><th>Dept</th><th>Urgency</th><th>Status</th><th>Actions</th></tr></thead><tbody></tbody></table><script>async function load(){const r=await fetch('/api/tickets');const rows=await r.json();const tb=document.querySelector('#t tbody');tb.innerHTML='';for(const x of rows){const tr=document.createElement('tr');tr.innerHTML=`<td>${x.ticketId||x._id}</td><td>${x.requester}</td><td>${x.department}</td><td>${x.urgency}</td><td>${x.status}</td><td><button data-id='${x._id}' data-s='${x.status}'>Toggle</button> <button data-did='${x._id}'>Delete</button></td>`;tb.appendChild(tr);}tb.onclick=async(e)=>{if(e.target.dataset.id){const id=e.target.dataset.id;const ns=e.target.dataset.s==='Open'?'Completed':'Open';await fetch('/api/tickets/'+id,{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify({status:ns})});load();}if(e.target.dataset.did){const id=e.target.dataset.did;if(confirm('Delete?')){await fetch('/api/tickets/'+id,{method:'DELETE'});load();}}};}document.getElementById('r').onclick=load;load();</script></body></html>